<!DOCTYPE html>
<html>
	<head><title>"Happy Vday!!"</title></head> 
    <script src="https://aframe.io/releases/1.0.0/aframe.min.js"></script>
    <!-- we import arjs version without NFT but with marker + location based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
	<!-- <script>
		window.onload = function () {
			document.querySelector(".say-hi-button").addEventListener("click", function () {
				open("https://www.google.com"); 
			}); 
		}; 
	</script>  -->
			
	<!-- <style>
		.buttons{
			position: absolute; 
			bottom: 0; 
			left: 0; 
			width: 100%;  
			height: 5em; 
			display: flex; 
			justify-content: center;
			align-items: center; 
			z-index: 10; 
		}
		
		.say-hi-button{
		padding: 0.25em;
		border-radius: 4px;
		border: none;
		background: white;
		color: black;
		width: 4em;
		height: 2em; 
		}
	</style> -->
	
	<script> 
		
		function Returnstatus (marker) {
			return marker.object3D.visible; 
		}
		
		function handleClickEvent() {
			var marker = document.querySelector('a-marker'); 
			if (Returnstatus(marker))
			{
				<!-- open("http://y2u.be/8ECPu3iumnE");  -->
				<!-- window.close(); -->
			}
			}
	
		AFRAME.registerComponent('accepts-clicks',{
			init: function () {
				this.el.addEventListener('touchend', handleClickEvent);
				this.el.addEventListener('click', handleClickEvent);  
				}
			});

	</script>
	
	<body style="margin : 0px; overflow: hidden;">
		<!-- <div class="buttons">
			<button class="say-hi-button"></button>
		</div> -->
        <a-scene 
			embedded 
			arjs
			accepts-clicks
			renderer="logarithmicDepthBuffer: true;"
			vr-mode-ui="enabled: false"
			gesture-detector
			id="scene"	
		>
		
			<a-assets>
						<audio id="sound" src="Karaman.github.io/Valentines/mysteryoflove.mp3" preload="true"></audio>
			</a-assets>
		
			<a-marker preset="pattern" type="pattern" url="https://rawcdn.githack.com/Karaman/AR_Model_Repo/825dff4c1095dcf6e4a37ce7ad7ca3601e3e89c3/HeartMarker.patt">
				<a-entity
				position="0 0 0" 
				rotation="-90 0 0"
				scale="0.5 0.5 0.5"
				soundhandler
				gltf-model= "https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/Karaman/AR_Model_Repo/54f461aa2d0b9bd2a948a822372ea01bc1951f64/Heart_anim.gltf"
				animation-mixer="clip: "HeartAction; loop=repeat"
				></a-entity> 
				
				<!-- <a-box position='0 0.5 0' material='color: black;' soundhandler> 
                </a-box> -->
				
			</a-marker>
			
			<a-entity sound="src: #sound" autoplay="true"></a-entity>
			<a-entity camera></a-entity>
			
        <a-entity camera></a-entity>
        </a-scene>
		</a-scene>

		<script>
			AFRAME.registerComponent('soundhandler', {
				tick: function () {
					   var entity = document.querySelector('[sound]');
					 if (document.querySelector('a-marker').object3D.visible == true) {
						entity.components.sound.playSound();
					} else {
						entity.components.sound.pauseSound();
					}

				 }
			});
		</script>
		
    </body>
</html>
